<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢ - Lost Items Report</title>
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
<style>
* {
margin: 0;
padding: 0;
box-sizing: border-box;
}

body {
font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
min-height: 100vh;
padding: 20px;
}

.container {
max-width: 800px;
margin: 0 auto;
background: white;
border-radius: 20px;
box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
overflow: hidden;
}

.header {
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
padding: 40px 30px;
text-align: center;
}

.header h1 {
font-size: 2.5em;
margin-bottom: 10px;
}

.header p {
font-size: 1.1em;
opacity: 0.9;
}

.admin-section {
background: #fff3cd;
border: 2px solid #ffc107;
border-radius: 10px;
padding: 20px;
margin: 30px;
}

.admin-section h3 {
color: #856404;
margin-bottom: 15px;
display: flex;
align-items: center;
gap: 10px;
}

.config-group {
margin-bottom: 15px;
}

.config-group label {
display: block;
font-weight: 600;
margin-bottom: 5px;
color: #856404;
font-size: 0.95em;
}

.config-group input {
width: 100%;
padding: 10px;
border: 2px solid #ffc107;
border-radius: 8px;
font-size: 0.95em;
}

.config-group small {
display: block;
margin-top: 5px;
color: #856404;
font-size: 0.85em;
}

.save-config-btn {
background: #ffc107;
color: #856404;
border: none;
padding: 12px 24px;
border-radius: 8px;
font-weight: 600;
cursor: pointer;
transition: all 0.3s;
}

.save-config-btn:hover {
background: #ffcd39;
transform: translateY(-2px);
}

.status-indicator {
display: inline-block;
padding: 4px 12px;
border-radius: 12px;
font-size: 0.85em;
font-weight: 600;
margin-left: 10px;
}

.status-active {
background: #d4edda;
color: #155724;
}

.status-inactive {
background: #f8d7da;
color: #721c24;
}

.form-section {
padding: 40px 30px;
}

.form-group {
margin-bottom: 25px;
}

label {
display: block;
font-weight: 600;
margin-bottom: 8px;
color: #333;
font-size: 1.05em;
}

input[type="text"],
input[type="tel"],
input[type="email"],
input[type="date"],
textarea,
select {
width: 100%;
padding: 12px 15px;
border: 2px solid #e0e0e0;
border-radius: 10px;
font-size: 1em;
transition: all 0.3s;
font-family: inherit;
}

input:focus,
textarea:focus,
select:focus {
outline: none;
border-color: #667eea;
box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

textarea {
resize: vertical;
min-height: 120px;
}

.submit-btn {
width: 100%;
padding: 15px;
background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
color: white;
border: none;
border-radius: 10px;
font-size: 1.2em;
font-weight: 600;
cursor: pointer;
transition: transform 0.2s, box-shadow 0.2s;
}

.submit-btn:hover {
transform: translateY(-2px);
box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
}

.submit-btn:active {
transform: translateY(0);
}

.submit-btn:disabled {
opacity: 0.6;
cursor: not-allowed;
}

.reports-section {
background: #f8f9fa;
padding: 40px 30px;
border-top: 2px solid #e0e0e0;
}

.reports-section h2 {
color: #333;
margin-bottom: 20px;
font-size: 1.8em;
}

.report-card {
background: white;
padding: 20px;
border-radius: 10px;
margin-bottom: 15px;
border-left: 4px solid #667eea;
box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.report-card h3 {
color: #667eea;
margin-bottom: 10px;
}

.report-detail {
margin: 8px 0;
color: #555;
}

.report-detail strong {
color: #333;
}

.no-reports {
text-align: center;
color: #999;
padding: 40px;
font-size: 1.1em;
}

.success-message {
background: #d4edda;
color: #155724;
padding: 15px;
border-radius: 10px;
margin-bottom: 20px;
border: 1px solid #c3e6cb;
display: none;
}

.error-message {
background: #f8d7da;
color: #721c24;
padding: 15px;
border-radius: 10px;
margin-bottom: 20px;
border: 1px solid #f5c6cb;
display: none;
}

.info-box {
background: #d1ecf1;
border: 1px solid #bee5eb;
border-radius: 10px;
padding: 15px;
margin: 20px 30px;
color: #0c5460;
}

.info-box strong {
display: block;
margin-bottom: 10px;
}

.info-box ol {
margin-left: 20px;
line-height: 1.8;
}

.info-box a {
color: #0c5460;
font-weight: 600;
}

@media (max-width: 600px) {
.header h1 {
font-size: 1.8em;
}

.form-section,
.reports-section {
padding: 30px 20px;
}

.admin-section {
margin: 20px;
}
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<h1>üîç ‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</h1>
<p>‡∏£‡∏∞‡∏ö‡∏ö‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏¥‡πà‡∏á‡∏Ç‡∏≠‡∏á‡∏™‡∏π‡∏ç‡∏´‡∏≤‡∏¢ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•</p>
</div>

<div class="info-box">
<strong>üìß ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏≠‡∏µ‡πÄ‡∏°‡∏•:</strong>
<ol>
<li>‡πÑ‡∏õ‡∏ó‡∏µ‡πà <a href="https://www.emailjs.com/" target="_blank">EmailJS.com</a> ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ü‡∏£‡∏µ</li>
<li>‡πÄ‡∏û‡∏¥‡πà‡∏° Email Service (‡πÄ‡∏ä‡πà‡∏ô Gmail)</li>
<li>‡∏™‡∏£‡πâ‡∏≤‡∏á Email Template (‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£: {{itemName}}, {{category}}, {{description}}, {{location}}, {{reporterName}}, {{phone}}, {{email}}, {{lostDate}})</li>
<li>‡∏Ñ‡∏±‡∏î‡∏•‡∏≠‡∏Å <strong>Service ID</strong>, <strong>Template ID</strong> ‡πÅ‡∏•‡∏∞ <strong>Public Key</strong></li>
<li>‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á</li>
</ol>
</div>

<div class="admin-section">
<h3>
‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
<span class="status-indicator" id="emailStatus">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</span>
</h3>

<div class="config-group">
<label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</label>
<input type="email" id="adminEmail" placeholder="your.email@example.com">
<small>üì© ‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏£‡∏±‡∏ö‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Ñ‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</small>
</div>

<div class="config-group">
<label>EmailJS Service ID</label>
<input type="text" id="serviceId" placeholder="service_xxxxxxx">
<small>‡∏à‡∏≤‡∏Å EmailJS Dashboard</small>
</div>

<div class="config-group">
<label>EmailJS Template ID</label>
<input type="text" id="templateId" placeholder="template_xxxxxxx">
<small>‡∏à‡∏≤‡∏Å EmailJS Email Templates</small>
</div>

<div class="config-group">
<label>EmailJS Public Key</label>
<input type="text" id="publicKey" placeholder="xxxxxxxxxxxxxxx">
<small>‡∏à‡∏≤‡∏Å EmailJS Account > API Keys</small>
</div>

<button class="save-config-btn" onclick="saveEmailConfig()">üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤</button>
</div>

<div class="form-section">
<div class="success-message" id="successMessage"></div>
<div class="error-message" id="errorMessage"></div>

<form id="lostItemForm">
<div class="form-group">
<label for="itemName">‡∏ä‡∏∑‡πà‡∏≠‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢ *</label>
<input type="text" id="itemName" name="itemName" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå, ‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠, ‡∏Å‡∏∏‡∏ç‡πÅ‡∏à‡∏£‡∏ñ" required>
</div>

<div class="form-group">
<label for="category">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢ *</label>
<select id="category" name="category" required>
<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó --</option>
<option value="‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå">‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏≠‡∏¥‡πÄ‡∏•‡πá‡∏Å‡∏ó‡∏£‡∏≠‡∏ô‡∏¥‡∏Å‡∏™‡πå</option>
<option value="‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏ö‡∏±‡∏ï‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ">‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£/‡∏ö‡∏±‡∏ï‡∏£‡∏ï‡πà‡∏≤‡∏á‡πÜ</option>
<option value="‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô/‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå">‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡πÄ‡∏á‡∏¥‡∏ô/‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏™‡∏ï‡∏≤‡∏á‡∏Ñ‡πå</option>
<option value="‡∏Å‡∏∏‡∏ç‡πÅ‡∏à">‡∏Å‡∏∏‡∏ç‡πÅ‡∏à</option>
<option value="‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤">‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤</option>
<option value="‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö">‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏î‡∏±‡∏ö</option>
<option value="‡∏≠‡∏∑‡πà‡∏ô‡πÜ">‡∏≠‡∏∑‡πà‡∏ô‡πÜ</option>
</select>
</div>

<div class="form-group">
<label for="description">‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢ *</label>
<textarea id="description" name="description" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡∏•‡∏±‡∏Å‡∏©‡∏ì‡∏∞ ‡∏™‡∏µ ‡∏Ç‡∏ô‡∏≤‡∏î ‡∏´‡∏£‡∏∑‡∏≠‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ä‡πà‡∏ß‡∏¢‡∏£‡∏∞‡∏ö‡∏∏‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡πÑ‡∏î‡πâ" required></textarea>
</div>

<div class="form-group">
<label for="lostDate">‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏≤‡∏¢</label>
<input type="date" id="lostDate" name="lostDate">
</div>

<div class="form-group">
<label for="location">‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏≤‡∏¢ *</label>
<input type="text" id="location" name="location" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ï‡∏∂‡∏Å A ‡∏ä‡∏±‡πâ‡∏ô 3, ‡∏´‡πâ‡∏≠‡∏á‡∏õ‡∏£‡∏∞‡∏ä‡∏∏‡∏°, ‡∏•‡∏≤‡∏ô‡∏à‡∏≠‡∏î‡∏£‡∏ñ" required>
</div>

<div class="form-group">
<label for="reporterName">‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á *</label>
<input type="text" id="reporterName" name="reporterName" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" required>
</div>

<div class="form-group">
<label for="phone">‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠ *</label>
<input type="tel" id="phone" name="phone" placeholder="0XX-XXX-XXXX" required>
</div>

<div class="form-group">
<label for="email">‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
<input type="email" id="email" name="email" placeholder="your.email@example.com">
</div>

<button type="submit" class="submit-btn" id="submitBtn">üìù ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô</button>
</form>
</div>

<div class="reports-section">
<h2>üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á‡∏´‡∏≤‡∏¢</h2>
<div id="reportsList">
<div class="no-reports">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</div>
</div>
</div>
</div>

<script>
let reports = JSON.parse(localStorage.getItem('lostItemReports')) || [];
let emailConfig = JSON.parse(localStorage.getItem('emailConfig')) || {};

// Initialize EmailJS
if (emailConfig.publicKey) {
emailjs.init(emailConfig.publicKey);
}

function updateEmailStatus() {
const statusEl = document.getElementById('emailStatus');
const isConfigured = emailConfig.adminEmail && emailConfig.serviceId &&
emailConfig.templateId && emailConfig.publicKey;

if (isConfigured) {
statusEl.textContent = '‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô';
statusEl.className = 'status-indicator status-active';
} else {
statusEl.textContent = '‚ùå ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤';
statusEl.className = 'status-indicator status-inactive';
}
}

function loadEmailConfig() {
document.getElementById('adminEmail').value = emailConfig.adminEmail || '';
document.getElementById('serviceId').value = emailConfig.serviceId || '';
document.getElementById('templateId').value = emailConfig.templateId || '';
document.getElementById('publicKey').value = emailConfig.publicKey || '';
updateEmailStatus();
}

function saveEmailConfig() {
emailConfig = {
adminEmail: document.getElementById('adminEmail').value,
serviceId: document.getElementById('serviceId').value,
templateId: document.getElementById('templateId').value,
publicKey: document.getElementById('publicKey').value
};

localStorage.setItem('emailConfig', JSON.stringify(emailConfig));

// Initialize EmailJS with new key
if (emailConfig.publicKey) {
emailjs.init(emailConfig.publicKey);
}

updateEmailStatus();
showMessage('success', '‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß!');
}

function showMessage(type, text) {
const messageEl = document.getElementById(type === 'success' ? 'successMessage' : 'errorMessage');
messageEl.textContent = text;
messageEl.style.display = 'block';
setTimeout(() => {
messageEl.style.display = 'none';
}, 5000);
}

async function sendEmailNotification(reportData) {
if (!emailConfig.adminEmail || !emailConfig.serviceId ||
!emailConfig.templateId || !emailConfig.publicKey) {
console.log('Email not configured, skipping notification');
return;
}

try {
const templateParams = {
to_email: emailConfig.adminEmail,
itemName: reportData.itemName,
category: reportData.category,
description: reportData.description,
location: reportData.location,
lostDate: reportData.lostDate || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏',
reporterName: reportData.reporterName,
phone: reportData.phone,
email: reportData.email || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏',
reportDate: new Date(reportData.reportDate).toLocaleString('th-TH')
};

await emailjs.send(
emailConfig.serviceId,
emailConfig.templateId,
templateParams
);

console.log('Email sent successfully');
} catch (error) {
console.error('Email sending failed:', error);
throw error;
}
}

function displayReports() {
const reportsList = document.getElementById('reportsList');

if (reports.length === 0) {
reportsList.innerHTML = '<div class="no-reports">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢</div>';
return;
}

reportsList.innerHTML = reports.map((report, index) => `
<div class="report-card">
<h3>${report.itemName}</h3>
<div class="report-detail"><strong>‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó:</strong> ${report.category}</div>
<div class="report-detail"><strong>‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î:</strong> ${report.description}</div>
<div class="report-detail"><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏ó‡∏≥‡∏´‡∏≤‡∏¢:</strong> ${report.lostDate || '‡πÑ‡∏°‡πà‡∏£‡∏∞‡∏ö‡∏∏'}</div>
<div class="report-detail"><strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà:</strong> ${report.location}</div>
<div class="report-detail"><strong>‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á:</strong> ${report.reporterName}</div>
<div class="report-detail"><strong>‡∏ï‡∏¥‡∏î‡∏ï‡πà‡∏≠:</strong> ${report.phone}${report.email ? ' | ' + report.email : ''}</div>
<div class="report-detail"><strong>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏à‡πâ‡∏á:</strong> ${new Date(report.reportDate).toLocaleString('th-TH')}</div>
</div>
`).join('');
}

document.getElementById('lostItemForm').addEventListener('submit', async function(e) {
e.preventDefault();

const submitBtn = document.getElementById('submitBtn');
submitBtn.disabled = true;
submitBtn.textContent = '‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á...';

const formData = {
itemName: document.getElementById('itemName').value,
category: document.getElementById('category').value,
description: document.getElementById('description').value,
lostDate: document.getElementById('lostDate').value,
location: document.getElementById('location').value,
reporterName: document.getElementById('reporterName').value,
phone: document.getElementById('phone').value,
email: document.getElementById('email').value,
reportDate: new Date().toISOString()
};

try {
// Send email notification
await sendEmailNotification(formData);

// Save to local storage
reports.unshift(formData);
localStorage.setItem('lostItemReports', JSON.stringify(reports));

// Show success message
showMessage('success', '‚úÖ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß! ' +
(emailConfig.adminEmail ? '‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏•‡πâ‡∏ß' : ''));

// Reset form
this.reset();

// Update display
displayReports();

// Scroll to reports
document.querySelector('.reports-section').scrollIntoView({ behavior: 'smooth' });

} catch (error) {
showMessage('error', '‚ö†Ô∏è ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS');

// Still save locally even if email fails
reports.unshift(formData);
localStorage.setItem('lostItemReports', JSON.stringify(reports));
this.reset();
displayReports();
} finally {
submitBtn.disabled = false;
submitBtn.textContent = 'üìù ‡∏™‡πà‡∏á‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô';
}
});

// Load config and display reports on page load
loadEmailConfig();
displayReports();
</script>
</body>
</html>
```

## üìß **‡∏à‡∏∏‡∏î‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏ó‡∏≥:**

### **‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì:**
‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏ß‡πá‡∏ö‡∏°‡∏µ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á **"‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô"** ‡πÉ‡∏´‡πâ:
1. **‡πÉ‡∏™‡πà‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì** ‡πÉ‡∏ô‡∏ä‡πà‡∏≠‡∏á "‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô" üëà **‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ**
2. ‡πÉ‡∏™‡πà Service ID, Template ID ‡πÅ‡∏•‡∏∞ Public Key ‡∏à‡∏≤‡∏Å EmailJS
3. ‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏° "üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤"

### **‡∏ß‡∏¥‡∏ò‡∏µ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ EmailJS (‡∏ü‡∏£‡∏µ):**

1. **‡∏™‡∏°‡∏±‡∏Ñ‡∏£**: ‡πÑ‡∏õ‡∏ó‡∏µ‡πà https://www.emailjs.com/ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏ü‡∏£‡∏µ
2. **‡πÄ‡∏û‡∏¥‡πà‡∏° Email Service**:
- Dashboard ‚Üí Email Services ‚Üí Add New Service
- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å Gmail (‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡πÉ‡∏ä‡πâ)
3. **‡∏™‡∏£‡πâ‡∏≤‡∏á Email Template**:
- Email Templates ‚Üí Create New Template
- ‡πÉ‡∏™‡πà‡∏ï‡∏±‡∏ß‡πÅ‡∏õ‡∏£‡πÄ‡∏´‡∏•‡πà‡∏≤‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡πÄ‡∏ó‡∏°‡πÄ‡∏û‡∏•‡∏ï:
```
‡∏°‡∏µ‡∏Ñ‡∏ô‡πÅ‡∏à‡πâ‡∏á‡∏Ç‡∏≠‡∏á‡∏´‡∏≤‡∏¢!

‡∏Ç‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢: {{itemName}}
‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó: {{category}}
‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î: {{description}}
‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà: {{location}}
‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏´‡∏≤‡∏¢: {{lostDate}}

‡∏ú‡∏π‡πâ‡πÅ‡∏à‡πâ‡∏á: {{reporterName}}
‡πÄ‡∏ö‡∏≠‡∏£‡πå: {{phone}}
‡∏≠‡∏µ‡πÄ‡∏°‡∏•: {{email}}